apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

resources:
- service-accounts.yaml

patches:
- path: patch.yaml
  target:
    group: apigee.cloud.google.com
    version: v1alpha2
    kind: ApigeeEnvironment
- target:
    group: apigee.cloud.google.com
    version: v1alpha2
    kind: ApigeeEnvironment
  patch: |-
    - op: remove
      path: /spec/components/synchronizer/appServiceAccountSecretName
    - op: remove
      path: /spec/components/udca/appServiceAccountSecretName
    - op: remove
      path: /spec/components/runtime/appServiceAccountSecretName